FROM bitwalker/alpine-elixir-phoenix:latest
WORKDIR "/app"
COPY ./mix.exs ./mix.lock ./
RUN mix do deps.get, deps.compile
COPY ./priv ./config ./entrypoint.sh ./
RUN ["chmod", "+x", "./entrypoint.sh"]
ENTRYPOINT ["sh", "./entrypoint.sh"]
COPY . .
CMD mix phx.server