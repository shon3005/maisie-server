import Name from './components/name.js';
import Spacer from './components/spacer.js';
import HorLinks from './components/hor_links.js';
var classNames = require('classnames')
import { connect } from 'react-redux';
import {Link} from '../../../../../../../routes';
import cookie from 'cookie';
import Router from 'next/router';

const LoggedIn = (props) =>
<div className="row-fe-c">
  <HorLinks circle={props.circle} />
  <div className="headerLoggedIn row-fe-c">
    <div className="headerLoggedIn-thumb" style={{backgroundImage: "url('../../../../../static/shared/matthew.png')", backgroundSize: "cover", backgroundPosition: "contain"}} />
    <div className={classNames(["headerLoggedIn__drop", {"circle_page" : props.circle}])}>
      <div className="headerLoggedIn__drop-cover" />
      <Spacer circle={props.circle} />
      <Spacer circle={false} />
      <Name user={props.user} />
      <Spacer circle={false} />
      {
        props.user && props.user.role === 'host' ?
          <div>
            <Link route="/panel">
              <div className="headerLoggedIn__drop-item large row-fs-c">
                <svg viewBox="0 0 24 24">
                  <g id="Web-V2" strokeWidth="1" fillRule="evenodd">
                      <g id="Group-57" transform="translate(12.427608, 12.257987) rotate(30.000000) translate(-12.427608, -12.257987) translate(1.427608, 1.257987)" fillRule="nonzero" stroke="#7692FF" strokeWidth="1.3">
                          <path d="M10.6196705,21.5383231 C10.6008406,21.5388327 10.5819475,21.5390891 10.5629945,21.5390891 C10.5141253,21.5390891 10.4652748,21.5373843 10.4165319,21.5340308 C4.64305826,21.3582495 0.0169766398,16.6231308 0.0169766398,10.8073818 C0.0169766398,10.8011793 0.0170041057,10.7949832 0.0170589224,10.7887936 C0.0376346763,11.9065897 0.950186444,12.8063952 2.07289911,12.8063952 C3.19675917,12.8063952 4.11002855,11.9047496 4.12879958,10.7853659 C4.12887648,10.7926954 4.12891503,10.8000341 4.12891503,10.8073818 C4.12891503,14.4633792 7.09268652,17.4271507 10.7486839,17.4271507 C11.8841644,17.4271507 12.8046532,18.3476395 12.8046532,19.4831199 C12.8046532,20.6183411 11.884569,21.5387125 10.7492353,21.539089 C10.7059868,21.539089 10.662798,21.5388332 10.6196705,21.5383231 Z" id="Combined-Shape"></path>
                          <path d="M20.3586949,20.5162753 C20.3398649,20.5167849 20.3209719,20.5170414 20.3020189,20.5170414 C20.2531497,20.5170414 20.2042992,20.5153365 20.1555563,20.5119831 C14.3820827,20.3362018 9.75600103,15.601083 9.75600103,9.78533404 C9.75600103,9.77913153 9.7560285,9.77293545 9.75608331,9.76674589 C9.77665907,10.8845419 10.6892108,11.7843475 11.8119235,11.7843475 C12.9357836,11.7843475 13.8490529,10.8827018 13.867824,9.7633181 C13.8679009,9.77064762 13.8679394,9.77798633 13.8679394,9.78533404 C13.8679394,13.4413315 16.8317109,16.405103 20.4877083,16.405103 C21.6231888,16.405103 22.5436776,17.3255917 22.5436776,18.4610722 C22.5436776,19.5962933 21.6235933,20.5166647 20.4882597,20.5170413 C20.4450112,20.5170413 20.4018224,20.5167855 20.3586949,20.5162753 Z" id="Combined-Shape" transform="translate(16.149839, 15.140180) rotate(-90.000000) translate(-16.149839, -15.140180) "></path>
                          <path d="M19.3391827,10.7529572 C19.3203528,10.7534668 19.3014597,10.7537233 19.2825067,10.7537233 C19.2336375,10.7537233 19.184787,10.7520184 19.1360441,10.748665 C13.3625705,10.5728837 8.73648883,5.83776494 8.73648883,0.022015934 C8.73648883,0.0158134314 8.7365163,0.00961734369 8.73657112,0.003427786 C8.75714687,1.12122382 9.66969864,2.02102939 10.7924113,2.02102939 C11.9162714,2.02102939 12.8295407,1.1193837 12.8483118,2.83028236e-11 C12.8483887,0.00732951468 12.8484272,0.0146682231 12.8484272,0.022015934 C12.8484272,3.67801337 15.8121987,6.64178486 19.4681961,6.64178486 C20.6036766,6.64178486 21.5241654,7.56227361 21.5241654,8.6977541 C21.5241654,9.83297522 20.6040812,10.7533466 19.4687475,10.7537232 C19.425499,10.7537232 19.3823102,10.7534674 19.3391827,10.7529572 Z" id="Combined-Shape" transform="translate(15.130327, 5.376862) rotate(180.000000) translate(-15.130327, -5.376862) "></path>
                          <path d="M9.60269383,11.7699339 C9.58386392,11.7704435 9.56497083,11.7706999 9.54601785,11.7706999 C9.49714869,11.7706999 9.44829819,11.7689951 9.39955524,11.7656416 C3.62608162,11.5898603 -1,6.85474158 -1,1.03899257 C-1,1.03279007 -0.999972534,1.02659398 -0.999917717,1.02040443 C-0.979341964,2.13820046 -0.0667901962,3.03800603 1.05592247,3.03800603 C2.17978253,3.03800603 3.09305191,2.13636034 3.11182294,1.01697664 C3.11189984,1.02430615 3.11193839,1.03164486 3.11193839,1.03899257 C3.11193839,4.69499001 6.07570988,7.65876149 9.73170729,7.65876149 C10.8671878,7.65876149 11.7876765,8.57925025 11.7876765,9.71473074 C11.7876765,10.8499519 10.8675923,11.7703233 9.73225864,11.7706998 C9.68901013,11.7706998 9.64582139,11.770444 9.60269383,11.7699339 Z" id="Combined-Shape" transform="translate(5.393838, 6.393838) rotate(-270.000000) translate(-5.393838, -6.393838) "></path>
                      </g>
                  </g>
                </svg>
                <span>Host Panel</span>
              </div>
            </Link>
            <Spacer circle={false} />
          </div> :
          null
      }
      <Link route="/settings">
        <div className="headerLoggedIn__drop-item large row-fs-c">
          <svg width="24px" height="22px" viewBox="0 0 24 22">
              <g id="Web-V2" strokeWidth="1" fillRule="evenodd">
                  <g id="Group-55" fillRule="nonzero" strokeWidth="1.5">
                      <path d="M17.9160435,1.12031966 C17.7812019,0.889050677 17.5264546,0.75 17.2265643,0.75 L6.77001228,0.75 C6.47344081,0.75 6.21476263,0.892156472 6.08106735,1.11939458 L0.852302446,10.167017 C0.713468641,10.4106844 0.715809324,10.7087315 0.860975495,10.958421 L6.20391943,20.1953749 L6.20391943,20.216113 C6.3239005,20.3587088 6.54790832,20.4685265 6.77001228,20.4685265 L17.2265643,20.4685265 C17.4922684,20.4685265 17.7644483,20.3034203 17.9150123,20.0444619 L23.1442742,10.9682125 C23.2852419,10.7207997 23.2852419,10.4199829 23.1464622,10.1763842 L17.9160435,1.12031966 Z M12.0010649,16.2487981 C8.86026233,16.2487981 6.30322214,13.6917579 6.30322214,10.5509553 C6.30322214,7.41015279 8.86026233,4.8531126 12.0010649,4.8531126 C15.1418674,4.8531126 17.6989076,7.41015279 17.6989076,10.5509553 C17.6989076,13.6917579 15.1418674,16.2487981 12.0010649,16.2487981 Z" id="Shape"></path>
                  </g>
              </g>
          </svg>
          <span>Settings</span>
        </div>
      </Link>
      <Spacer circle={false} />
      <Link route="#">
        <div className="headerLoggedIn__drop-item large row-fs-c" onClick={handleDelete}>
          <svg className="so" viewBox="0 0 12 11">
              <g id="Web-V2" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd" fillOpacity="1">
                  <g id="Group-45-Copy" transform="translate(-97.000000, -5.000000)" fillRule="nonzero">
                      <g id="Group-42-Copy">
                          <g id="external" transform="translate(97.000000, 5.000000)">
                              <path d="M11.9242627,5.11141387 L7.85044408,0.494768744 C7.75037308,0.378613419 7.63172715,0.288769457 7.49085664,0.222480085 C7.35198565,0.157131626 7.20647693,0.125 7.04920131,0.125 C6.76147699,0.125 6.52423017,0.214662342 6.31487965,0.402456309 C6.11859585,0.578529015 6.02887037,0.763760205 6.02887037,0.991164835 C6.02887037,1.11640514 6.05716642,1.24419632 6.1148453,1.37822952 C6.17751943,1.52387061 6.2738806,1.66480943 6.42196903,1.82532649 L8.30126606,4.00711831 L1.30350281,4.00711831 C0.992222757,4.00711831 0.744310273,4.10886961 0.531526196,4.32385398 C0.317638825,4.53995305 0.215909091,4.7933023 0.215909091,5.11113722 C0.215909091,5.43971595 0.317234767,5.69663424 0.529923949,5.90955128 C0.74280377,6.12265916 0.991396495,6.22365092 1.30350281,6.22365092 L8.40741461,6.22365092 L6.39073063,8.26118841 C6.27306332,8.38007246 6.18402556,8.51330732 6.12160509,8.6638518 C6.05954015,8.81353882 6.02887037,8.96742086 6.02887037,9.12917215 C6.02887037,9.40959543 6.12084952,9.63028804 6.31659907,9.82045506 C6.51577264,10.0139484 6.75117208,10.1057692 7.04920131,10.1057692 C7.20186854,10.1057692 7.34416004,10.0746173 7.48099532,10.0112526 C7.62084796,9.94649064 7.7458807,9.85273191 7.85453305,9.73123486 L11.7866394,5.26763976 L11.9242627,5.11141387 Z" id="âžœ"></path>
                          </g>
                      </g>
                  </g>
              </g>
          </svg>
          <span>Sign Out</span>
        </div>
      </Link>
    </div>
  </div>
</div>
const handleDelete = () => {
  document.cookie = cookie.serialize('token', '', {
    maxAge: -1
  });
  Router.push('/');
}

const mapStateToProps = (state) => {
  return { user: state.user.user };
}

export default connect(mapStateToProps)(LoggedIn);
